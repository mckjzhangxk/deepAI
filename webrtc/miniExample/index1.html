<!DOCTYPE html>
<html>

<head>

  <title>Realtime communication with WebRTC</title>


  
</head>

<body>

  <h1>Realtime communication with WebRTC</h1>


</div>

  <!-- This file is automatically added/served when running "node index.js". -->

  <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
  
  <script>
        let LOG=console.log;
        const sdp={"type":"offer","sdp":"v=0\r\no=- 5559475269675486834 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=group:BUNDLE 0\r\na=msid-semantic: WMS\r\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\r\nc=IN IP4 0.0.0.0\r\na=candidate:3954332230 1 udp 2113937151 b26321fc-6eed-4e70-87d3-79a342046183.local 48653 typ host generation 0 network-cost 999\r\na=ice-ufrag:Pj8E\r\na=ice-pwd:D1XsFyR3iuiMCRWqukvs7xA8\r\na=ice-options:trickle\r\na=fingerprint:sha-256 0E:8F:C6:0C:7A:9F:D8:EF:B5:FA:F1:88:E1:F1:AE:DE:A1:AD:F8:21:6C:AD:11:B6:14:27:1D:EA:DB:3F:C2:D2\r\na=setup:actpass\r\na=mid:0\r\na=sctp-port:5000\r\na=max-message-size:262144\r\n"}

        const rc=new RTCPeerConnection()
        var dc;
        rc.ondatachannel=e=>{
              dc=e.channel;
              dc.onopen=x=>LOG('channelopen');
              dc.onclose=x=>LOG('channel closed');
              dc.onmessage=x=>LOG('receive message:'+x.data);
        }
 

        rc.onicecandidate=e=>LOG('new SDP',JSON.stringify(rc.localDescription));
        rc.setRemoteDescription(sdp)
        rc.createAnswer().then(o=>rc.setLocalDescription(o)).then(a=>LOG('success create answer'))
  </script>

</body>
</html>
